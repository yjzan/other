(function(a){a.fn.currencyFormat=function(){this.each(function(){var a=this.value;""===a||"."===a?this.value="":(a=a.split("."),""===a[0]&&(a[0]=0,this.value=a.join(".")),a[0].startsWith(0)&&("0"!==a[0]||a[1])&&(a[0]=parseInt(a[0]),this.value=a.join(".")),a[1]&&2<a[1].length&&(a[1]=a[1].substring(0,2),this.value=a.join(".")))});return this}})(jQuery);
jQuery(document).ready(function(a){function h(){a.each(k,function(a,b){b.prop("checked")&&(d.responder.handle.prop("checked",!0),d.responder.content.show())})}function e(){a(".wp_weixin-yl_mchId-field").show();a(".wp_weixin-yl_key-field").show();a(".wp_weixin-mch_appid-field").hide();a(".wp_weixin-mch_id-field").hide();a(".wp_weixin-mch_key-field").hide();a(".wp_weixin-pem-field").hide();a(".wp_weixin-pem_path-field").hide();a(".wp_weixin-cbx_ys_pay-field").hide();a(".wp_weixin-ys_partner_id-field").hide();
a(".wp_weixin-ys_seller_id-field").hide();a(".wp_weixin-ys_seller_name-field").hide();a(".wp_weixin-ys_wx_appid-field").hide()}function f(){a(".wp_weixin-yl_mchId-field").hide();a(".wp_weixin-yl_key-field").hide();a(".wp_weixin-mch_appid-field").show();a(".wp_weixin-mch_id-field").show();a(".wp_weixin-mch_key-field").show();a(".wp_weixin-pem-field").show();a(".wp_weixin-pem_path-field").show();a(".wp_weixin-pem_path-field").show();a(".wp_weixin-cbx_ys_pay-field").show();a(".wp_weixin-ys_partner_id-field").hide();
a(".wp_weixin-ys_seller_id-field").hide();a(".wp_weixin-ys_seller_name-field").hide();a(".wp_weixin-ys_wx_appid-field").hide()}function g(){a(".wp_weixin-ys_partner_id-field").show();a(".wp_weixin-ys_seller_id-field").show();a(".wp_weixin-ys_seller_name-field").show();a(".wp_weixin-ys_wx_appid-field").show();a(".wp_weixin-mch_appid-field").hide();a(".wp_weixin-mch_id-field").hide();a(".wp_weixin-mch_key-field").hide();a(".wp_weixin-pem-field").hide();a(".wp_weixin-pem_path-field").hide();a(".wp_weixin-cbx_yl_pay-field").hide();
a(".wp_weixin-yl_mchId-field").hide();a(".wp_weixin-yl_key-field").hide()}a(".toplevel_page_wp-weixin .stuffbox form h2").each(function(c,b){c=a(b);b=a(c).next(".section-class-holder").data("section_class");c.addClass(b)});var d={responder:{handle:a(".wp_weixin-responder-section.wp_weixin-responder-field input"),content:a(".wp_weixin-responder-section:not( .wp_weixin-responder-field )")},proxy:{handle:a(".wp_weixin-proxy-section.wp_weixin-proxy-field input"),content:a(".wp_weixin-proxy-section:not( .wp_weixin-proxy-field )")},
auth:{handle:a(".wp_weixin-enable_auth-field input"),content:a(".wp_weixin-force_wechat-field, .wp_weixin-force_follower-field, .wp_weixin-ecommerce_force_follower-field, .wp_weixin-show_bind_link-field, .wp_weixin-show_auth_link-field")}},k=[a(".wp_weixin-follow_welcome-field input")];a.each(d,function(c,b){b.handle.prop("checked")?b.content.show():b.content.hide();b.handle.on("change",function(){a(this).prop("checked")?b.content.show():b.content.hide()})});a.each(k,function(a,b){b.prop("checked")&&
!d.responder.handle.prop("checked")&&(d.responder.handle.prop("checked",!0),d.responder.handle.trigger("change"));b.on("change",h)});d.responder.handle.on("change",h);a(".wp_weixin-force_auth-field input").prop("checked")&&a(".wp_weixin-enable_auth-field input").prop("checked",!0);a(".wp_weixin-enable_auth-field input, .wp_weixin-force_auth-field input").on("change",function(){a(".wp_weixin-force_auth-field input").prop("checked")&&a(".wp_weixin-enable_auth-field input").prop("checked",!0)});a('input[type="password"].toggle').on("focus",
function(){a(this).attr("type","text")});a('input[type="password"].toggle').on("blur",function(){a(this).attr("type","password")});a(".wp_weixin-cbx_yl_pay-field input").is(":checked")&&!a(".wp_weixin-cbx_yl_pay-field input").is(":hidden")?e():a(".wp_weixin-cbx_ys_pay-field input").is(":checked")&&!a(".wp_weixin-cbx_ys_pay input").is(":hidden")?g():f();a(".wp_weixin-ecommerce-field input").is(":checked")&&!a(".wp_weixin-ecommerce-field input").is(":hidden")?(a(".wp_weixin-ecommerce_force_follower-field").show(),
a(".wp_weixin-mch_id-field").show(),a(".wp_weixin-mch_key-field").show(),a(".wp_weixin-pem-field").show(),a(".wp_weixin-pem_path-field").show(),a(".wp_weixin-cbx_yl_pay-field").show()):(a(".wp_weixin-ecommerce_force_follower-field").hide(),a(".wp_weixin-mch_id-field").hide(),a(".wp_weixin-mch_key-field").hide(),a(".wp_weixin-pem-field").hide(),a(".wp_weixin-pem_path-field").hide(),a(".wp_weixin-cbx_yl_pay-field").hide());a(".wp_weixin-ecommerce-field input").click(function(){a(this).is(":checked")?
(a(".wp_weixin-ecommerce_force_follower-field").show(),a(".wp_weixin-mch_id-field").show(),a(".wp_weixin-mch_key-field").show(),a(".wp_weixin-pem-field").show(),a(".wp_weixin-pem_path-field").show(),a(".wp_weixin-cbx_yl_pay-field").show(),a(".wp_weixin-yl_mchId-field").show(),a(".wp_weixin-yl_key-field").show(),a(".wp_weixin-cbx_yl_pay-field input").is(":checked")?e():a(".wp_weixin-cbx_ys_pay-field input").is(":checked")?g():f()):(a(".wp_weixin-ecommerce_force_follower-field").hide(),a(".wp_weixin-mch_id-field").hide(),
a(".wp_weixin-mch_key-field").hide(),a(".wp_weixin-pem-field").hide(),a(".wp_weixin-pem_path-field").hide(),a(".wp_weixin-cbx_yl_pay-field").hide(),a(".wp_weixin-yl_mchId-field").hide(),a(".wp_weixin-yl_key-field").hide())});a(".wp_weixin-cbx_yl_pay-field input").click(function(){a(this).is(":checked")?(e(),a(".wp_weixin-cbx_ys_pay-field input").prop("checked",!1)):f()});a(".wp_weixin-cbx_ys_pay-field input").click(function(){a(this).is(":checked")?(g(),a(".wp_weixin-cbx_yl_pay-field input").prop("checked",
!1)):(a(".wp_weixin-ys_partner_id-field").hide(),a(".wp_weixin-ys_seller_id-field").hide(),a(".wp_weixin-ys_seller_name-field").hide(),a(".wp_weixin-ys_wx_appid-field").hide(),a(".wp_weixin-mch_appid-field").show(),a(".wp_weixin-mch_id-field").show(),a(".wp_weixin-mch_key-field").show(),a(".wp_weixin-pem-field").show(),a(".wp_weixin-pem_path-field").show(),a(".wp_weixin-cbx_yl_pay-field").show())});a("#wp_weixin_qr_amount").on("keyup",function(c){c.preventDefault();a(this).currencyFormat()});a(".qr-button").on("click",
function(c){c.preventDefault();c=a(this);var b=a("#"+c.data("img")),d=a("#qr_url").val();c=c.hasClass("qr-payment-button")?{amount:a("#wp_weixin_qr_amount").val(),fixed:a("#wp_weixin_qr_amount_fixed").prop("checked"),productName:a("#wp_weixin_qr_product_name").val(),url:b.data("default_url")}:{url:d};c.action="wp_weixin_get_settings_qr";a.ajax({url:WpWeixin.ajax_url,type:"POST",data:c}).done(function(a){a.success?(b.attr("src",b.data("base_url")+a.data),b.css("visibility","visible"),b.parent().children("span").hide()):
(b.css("visibility","hidden"),b.parent().children("span").show())}).fail(function(a,b){WpWeixin.debug&&window.console.log(b)})})});